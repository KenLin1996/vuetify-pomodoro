import{g as R,o as U,a as E,n as G,u as w,b as I,r as x,w as M,c as N,p as D,m as W,d as q,e as z,f as H,h as $,i as J,j as K,k as X,l as Q,q as Y,s as Z,t as ee,v as te,x as ne,y as se,z as oe,A as re,B as ae,C as ie,D as le,E as u,F as A,G as ce,H as ue,I as v,V as de,J as P,K as F,L as fe,M as _}from"./index-LDda3MFB.js";import{u as me}from"./list-D5wf6GTh.js";import{u as ve}from"./settings-CHRg2ri7.js";import{V as b,a as pe}from"./VRow-BJ5L6gQ1.js";function O(e){return R()?(U(e),!0):!1}function k(){const e=new Set,t=s=>{e.delete(s)};return{on:s=>{e.add(s);const o=()=>t(s);return O(o),{off:o}},off:t,trigger:(...s)=>Promise.all(Array.from(e).map(o=>o(...s)))}}function B(e){return typeof e=="function"?e():w(e)}const ge=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const he=Object.prototype.toString,ye=e=>he.call(e)==="[object Object]",Se=()=>{};function be(e){return I()}function Ce(e,t=!0,n){be()?E(e,n):t?e():G(e)}function ke(e){var t;const n=B(e);return(t=n==null?void 0:n.$el)!=null?t:n}const j=ge?window:void 0;function we(...e){let t,n,a,s;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,a,s]=e,t=j):[t,n,a,s]=e,!t)return Se;Array.isArray(n)||(n=[n]),Array.isArray(a)||(a=[a]);const o=[],r=()=>{o.forEach(i=>i()),o.length=0},p=(i,c,d,f)=>(i.addEventListener(c,d,f),()=>i.removeEventListener(c,d,f)),h=M(()=>[ke(t),B(s)],([i,c])=>{if(r(),!i)return;const d=ye(c)?{...c}:c;o.push(...n.flatMap(f=>a.map(y=>p(i,f,y,d))))},{immediate:!0,flush:"post"}),g=()=>{h(),r()};return O(g),g}function xe(){const e=x(!1),t=I();return t&&E(()=>{e.value=!0},t),e}function Te(e){const t=xe();return N(()=>(t.value,!!e()))}function Pe(e={}){const{window:t=j,requestPermissions:n=!0}=e,a=e,s=Te(()=>{if(!t||!("Notification"in t))return!1;try{new Notification("")}catch{return!1}return!0}),o=x(s.value&&"permission"in Notification&&Notification.permission==="granted"),r=x(null),p=async()=>{if(s.value)return!o.value&&Notification.permission!=="denied"&&await Notification.requestPermission()==="granted"&&(o.value=!0),o.value},{on:h,trigger:g}=k(),{on:i,trigger:c}=k(),{on:d,trigger:f}=k(),{on:y,trigger:C}=k(),T=async l=>{if(!s.value||!o.value)return;const m=Object.assign({},a,l);return r.value=new Notification(m.title||"",m),r.value.onclick=g,r.value.onshow=c,r.value.onerror=f,r.value.onclose=C,r.value},S=()=>{r.value&&r.value.close(),r.value=null};if(n&&Ce(p),O(S),s.value&&t){const l=t.document;we(l,"visibilitychange",m=>{m.preventDefault(),l.visibilityState==="visible"&&S()})}return{isSupported:s,notification:r,ensurePermissions:p,permissionGranted:o,show:T,close:S,onClick:h,onShow:i,onError:d,onClose:y}}const _e=D({color:String,...W(),...q(),...z(),...H(),...$(),...J(),...K(),...X(),...Q()},"VSheet"),V=Y()({name:"VSheet",props:_e(),setup(e,t){let{slots:n}=t;const{themeClasses:a}=Z(e),{backgroundColorClasses:s,backgroundColorStyles:o}=ee(te(e,"color")),{borderClasses:r}=ne(e),{dimensionStyles:p}=se(e),{elevationClasses:h}=oe(e),{locationStyles:g}=re(e),{positionClasses:i}=ae(e),{roundedClasses:c}=ie(e);return le(()=>u(e.tag,{class:["v-sheet",a.value,s.value,r.value,h.value,i.value,c.value,e.class],style:[o.value,p.value,g.value,e.style]},n)),{}}}),Ne={class:"text-center",style:{color:"black"}},Oe={style:{backgroundColor:"#FFFFFF",width:"100px",padding:"4px",fontSize:"24px",border:"1px solid black",borderRadius:"5px"},class:""},Ie={__name:"index",setup(e){const t={STOP:0,COUNTING:1,PAUSE:2},n=x(t.STOP),a=me(),{currentItem:s,items:o,timeleft:r}=A(a),{setCurrentItem:p,countdown:h,setFinishItem:g}=a,i=ve(),{selectedAlarmFile:c}=A(i);let d=0;const f=()=>{n.value===t.STOP&&o.value.length>0&&p(),n.value=t.COUNTING,d=setInterval(()=>{h(),r.value===0&&C()},1e3)},y=()=>{n.value=t.PAUSE,clearInterval(d)},C=()=>{clearInterval(d),n.value=t.STOP;const l=new Audio;l.src=c.value,l.play();const{show:m,isSupported:L}=Pe({title:"事項完成",body:s.value,icon:new URL(""+new URL("pomodoroTechnique-BcA594Xx.png",import.meta.url).href,import.meta.url).href});L.value&&m(),g(),o.value.length>0&&f()},T=N(()=>s.value.length>0?s.value:o.value.length>0?"點擊開始":"無"),S=N(()=>{const l=Math.floor(r.value/60).toString().padStart(2,"0"),m=(r.value%60).toString().padStart(2,"0");return l+":"+m});return(l,m)=>(ce(),ue(de,{class:"w-100 h-100 d-flex align-center justify-center"},{default:v(()=>[u(pe,null,{default:v(()=>[u(b,{cols:"12",class:"d-flex justify-center mb-4"},{default:v(()=>[u(V,{elevation:10,style:{"border-radius":"12px",width:"300px","background-color":"rgba(242, 227, 245, 0.8)"}},{default:v(()=>[P("h1",Ne," 目前事項 "+F(T.value),1)]),_:1})]),_:1}),u(b,{cols:"12"},{default:v(()=>[u(V,{color:"#F3B4C4",elevation:"4",class:"mx-auto d-flex align-center justify-center flex-wrap text-center",style:{"max-width":"600px","border-radius":"12px"}},{default:v(()=>[u(b,{cols:"12",class:"text-center"},{default:v(()=>[P("h1",{style:fe({color:l.$vuetify.theme.themes.light.secondary,fontSize:"24px"})}," 剩餘時間 ",4)]),_:1}),u(b,{cols:"12",class:"d-flex justify-center"},{default:v(()=>[P("div",Oe,F(S.value),1)]),_:1}),u(b,{cols:"12",class:"text-center"},{default:v(()=>[u(_,{icon:"mdi-play",onClick:f,disabled:n.value===t.COUNTING||w(s).length===0&&w(o).length===0},null,8,["disabled"]),u(_,{icon:"mdi-pause",onClick:y,disabled:n.value!==t.COUNTING,class:"mx-3"},null,8,["disabled"]),u(_,{icon:"mdi-skip-next",onClick:C,disabled:w(s).length===0},null,8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}};export{Ie as default};
